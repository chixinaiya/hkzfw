{"version":3,"sources":["utils/api/House/index.js","components/HousePackage/index.js","components/HousePackage/index.module.css","pages/Rent/Add/index.module.css","pages/Rent/Add/index.js"],"names":["getFilters","id","api","get","params","getListByFilter","cityId","filters","start","end","getDetailById","uploadImgs","fd","post","HOUSE_PACKAGE","name","icon","HousePackage","state","selectedNames","toggleSelect","newSelectedNames","indexOf","filter","item","props","onSelect","setState","this","select","list","v","includes","map","isSelected","key","className","styles","active","join","onClick","root","renderItems","Component","module","exports","alert","roomTypeData","label","value","orientedData","floorData","RentAdd","onCancel","text","onPress","a","history","go","handlerInput","val","addHouse","tempSlides","title","description","oriented","price","roomType","size","floor","community","supporting","length","fail","FormData","forEach","append","file","status","data","serverImgs","postData","houseImg","pubHouse","success","push","location","Item","navHeader","mode","type","onLeftClick","header","renderHeader","data-role","extra","arrow","replace","placeholder","onChange","cols","pics","files","multiple","imgpicker","desc","rows","autoHeight","bottom","cancel","confirm"],"mappings":"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","file":"static/js/11.4d9be2d7.chunk.js","sourcesContent":["import api from \"../../axios\";\r\n\r\n// 房源相关的所有接口\r\n// 获取过滤器数据\r\nexport function getFilters(id) {\r\n  return api.get(\"/houses/condition\", {\r\n    params: {\r\n      id,\r\n    },\r\n  });\r\n}\r\n// 根据筛选器条件或取房源列表\r\nexport function getListByFilter(cityId, filters, start, end) {\r\n  return api.get(\"/houses\", {\r\n    params: {\r\n      cityId,\r\n      // 组装的过滤器数据解构出来\r\n      ...filters,\r\n      // 分页\r\n      start,\r\n      end,\r\n    },\r\n  });\r\n}\r\n// 根据房源id获取房源信息\r\nexport function getDetailById(id) {\r\n  return api.get(`/houses/${id}`);\r\n}\r\n// 上传图片\r\nexport function uploadImgs(fd) {\r\n  return api.post(`/houses/image`, fd);\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 所有房屋配套数据和图标\r\nconst HOUSE_PACKAGE = [\r\n  {\r\n    id: 1,\r\n    name: '衣柜',\r\n    icon: 'icon-wardrobe'\r\n  },\r\n  {\r\n    id: 2,\r\n    name: '洗衣机',\r\n    icon: 'icon-wash'\r\n  },\r\n  {\r\n    id: 3,\r\n    name: '空调',\r\n    icon: 'icon-air'\r\n  },\r\n  {\r\n    id: 4,\r\n    name: '天然气',\r\n    icon: 'icon-gas'\r\n  },\r\n  {\r\n    id: 5,\r\n    name: '冰箱',\r\n    icon: 'icon-ref'\r\n  },\r\n  {\r\n    id: 6,\r\n    name: '暖气',\r\n    icon: 'icon-Heat'\r\n  },\r\n  {\r\n    id: 7,\r\n    name: '电视',\r\n    icon: 'icon-vid'\r\n  },\r\n  {\r\n    id: 8,\r\n    name: '热水器',\r\n    icon: 'icon-heater'\r\n  },\r\n  {\r\n    id: 9,\r\n    name: '宽带',\r\n    icon: 'icon-broadband'\r\n  },\r\n  {\r\n    id: 10,\r\n    name: '沙发',\r\n    icon: 'icon-sofa'\r\n  }\r\n]\r\n\r\n/* \r\n  该组件的两种功能：\r\n  1 根据传入的 list 展示房屋配置列表（房源详情页面）\r\n    <HousePackage list={['衣柜', '洗衣机']} />\r\n  2 从所有配置列表中选择房屋配置（发布房源页面）\r\n    <HousePackage select onSelect={selectedItems => {...}} />\r\n*/\r\nexport default class HousePackage extends Component {\r\n  state = {\r\n    // 选中名称\r\n    selectedNames: []\r\n  }\r\n\r\n  // 根据id切换选中状态\r\n  toggleSelect = name => {\r\n    const { selectedNames } = this.state\r\n    let newSelectedNames\r\n\r\n    // 判断该项是否选中\r\n    if (selectedNames.indexOf(name) > -1) {\r\n      // 选中：从数组中删除选中项，也就是保留未选中项\r\n      newSelectedNames = selectedNames.filter(item => item !== name)\r\n    } else {\r\n      // 未选中：添加到数组中\r\n      newSelectedNames = [...selectedNames, name]\r\n    }\r\n\r\n    // 传递给父组件\r\n    this.props.onSelect(newSelectedNames)\r\n\r\n    this.setState({\r\n      selectedNames: newSelectedNames\r\n    })\r\n  }\r\n\r\n  // 渲染列表项\r\n  renderItems() {\r\n    const { selectedNames } = this.state\r\n    // select 的值为 true 表示 选择房屋配置；false 表示仅展示房屋列表\r\n    // list 表示要展示的列表项\r\n    const { select, list } = this.props\r\n\r\n    let data\r\n    // 如果传了 select 表示：选择 房屋配置\r\n    // 如果没传 select 表示：展示 房屋配置 列表\r\n    if (select) {\r\n      data = HOUSE_PACKAGE\r\n    } else {\r\n      // 展示房屋配置列表\r\n      // 从所有的列表项中过滤出要展示的（list）列表项\r\n      data = HOUSE_PACKAGE.filter(v => list.includes(v.name))\r\n    }\r\n\r\n    return data.map(item => {\r\n      // 判断该项是否选中\r\n      const isSelected = selectedNames.indexOf(item.name) > -1\r\n\r\n      return (\r\n        <li\r\n          key={item.id}\r\n          className={[styles.item, isSelected ? styles.active : ''].join(' ')}\r\n          onClick={select && (() => this.toggleSelect(item.name))}\r\n        >\r\n          <p>\r\n            <i className={`iconfont ${item.icon} ${styles.icon}`} />\r\n          </p>\r\n          {item.name}\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return <ul className={styles.root}>{this.renderItems()}</ul>\r\n  }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"HousePackage_root__3TwLC\",\"item\":\"HousePackage_item__3UqhK\",\"active\":\"HousePackage_active__2ckNB\",\"icon\":\"HousePackage_icon__svtDw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Add_root__1h9--\",\"bottom\":\"Add_bottom__3-ty0\",\"cancel\":\"Add_cancel__9-QlS\",\"imgpicker\":\"Add_imgpicker__1z-Gp\",\"input\":\"Add_input__37Sdh\",\"label\":\"Add_label__U2RS_\",\"confirm\":\"Add_confirm__BXf1h\",\"title\":\"Add_title__1r7vt\",\"pics\":\"Add_pics__3Z6jA\",\"supporting\":\"Add_supporting__1g2Ce\",\"desc\":\"Add_desc__1EPzg\"};","import React, { Component } from \"react\";\r\n\r\nimport {\r\n  Flex,\r\n  List,\r\n  InputItem,\r\n  Picker,\r\n  ImagePicker,\r\n  TextareaItem,\r\n  Modal,\r\n  NavBar,\r\n  Icon,\r\n  Toast,\r\n} from \"antd-mobile\";\r\n\r\nimport HousePackage from \"../../../components/HousePackage\";\r\n\r\nimport styles from \"./index.module.css\";\r\nimport { uploadImgs } from \"../../../utils/api/House\";\r\nimport { pubHouse } from \"../../../utils/api/user\";\r\n\r\nconst alert = Modal.alert;\r\n\r\n// 房屋类型\r\nconst roomTypeData = [\r\n  { label: \"一室\", value: \"ROOM|d4a692e4-a177-37fd\" },\r\n  { label: \"二室\", value: \"ROOM|d1a00384-5801-d5cd\" },\r\n  { label: \"三室\", value: \"ROOM|20903ae0-c7bc-f2e2\" },\r\n  { label: \"四室\", value: \"ROOM|ce2a5daa-811d-2f49\" },\r\n  { label: \"四室+\", value: \"ROOM|2731c38c-5b19-ff7f\" },\r\n];\r\n\r\n// 朝向：\r\nconst orientedData = [\r\n  { label: \"东\", value: \"ORIEN|141b98bf-1ad0-11e3\" },\r\n  { label: \"西\", value: \"ORIEN|103fb3aa-e8b4-de0e\" },\r\n  { label: \"南\", value: \"ORIEN|61e99445-e95e-7f37\" },\r\n  { label: \"北\", value: \"ORIEN|caa6f80b-b764-c2df\" },\r\n  { label: \"东南\", value: \"ORIEN|dfb1b36b-e0d1-0977\" },\r\n  { label: \"东北\", value: \"ORIEN|67ac2205-7e0f-c057\" },\r\n  { label: \"西南\", value: \"ORIEN|2354e89e-3918-9cef\" },\r\n  { label: \"西北\", value: \"ORIEN|80795f1a-e32f-feb9\" },\r\n];\r\n\r\n// 楼层\r\nconst floorData = [\r\n  { label: \"高楼层\", value: \"FLOOR|1\" },\r\n  { label: \"中楼层\", value: \"FLOOR|2\" },\r\n  { label: \"低楼层\", value: \"FLOOR|3\" },\r\n];\r\n\r\nexport default class RentAdd extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // 小区赋值\r\n    const { data = {} } = this.props.location;\r\n    let community = {\r\n      id: \"\",\r\n      name: \"\",\r\n    };\r\n    // if (data) {\r\n    community = {\r\n      id: data.id,\r\n      name: data.name,\r\n      // };\r\n    };\r\n    this.state = {\r\n      // 临时图片地址\r\n      tempSlides: [],\r\n\r\n      // 小区的名称和id\r\n      community: community,\r\n      // 价格\r\n      price: \"\",\r\n      // 面积\r\n      size: \"\",\r\n      // 房屋类型\r\n      roomType: \"\",\r\n      // 楼层\r\n      floor: \"\",\r\n      // 朝向：\r\n      oriented: \"\",\r\n      // 房屋标题\r\n      title: \"\",\r\n      // 房屋图片\r\n      houseImg: \"\",\r\n      // 房屋配套：\r\n      supporting: \"\",\r\n      // 房屋描述\r\n      description: \"\",\r\n    };\r\n  }\r\n\r\n  // 取消编辑，返回上一页\r\n  onCancel = () => {\r\n    alert(\"提示\", \"放弃发布房源?\", [\r\n      {\r\n        text: \"放弃\",\r\n        onPress: async () => this.props.history.go(-1),\r\n      },\r\n      {\r\n        text: \"继续编辑\",\r\n      },\r\n    ]);\r\n  };\r\n\r\n  // 处理输入选择相关的组件（双向数据绑定、受控组件）\r\n  handlerInput = (val, name) => {\r\n    this.setState({\r\n      [name]: val,\r\n    });\r\n  };\r\n\r\n  // 发布房源\r\n  addHouse = async () => {\r\n    // 先上传图片\r\n    // 获取本地图片基本信息\r\n    const {\r\n      tempSlides,\r\n      title,\r\n      description,\r\n      oriented,\r\n      price,\r\n      roomType,\r\n      size,\r\n      floor,\r\n      community,\r\n    } = this.state;\r\n    // 获取房屋配套数据\r\n    let supporting = this.supporting;\r\n    // 边界处理（验证）\r\n    if (!title || !size || !price || tempSlides.length === 0) {\r\n      return Toast.fail(\"请输入房源基本信息！\");\r\n    }\r\n    // 服务器存储的图片地址\r\n    let serverImgs;\r\n    if (tempSlides.length) {\r\n      // 上传到服务器=》获取服务器的图片存储路径\r\n      // 处理本地图片数据\r\n      let fd = new FormData();\r\n      tempSlides.forEach((item) => fd.append(\"file\", item.file));\r\n      let { status, data } = await uploadImgs(fd);\r\n      if (status === 200) {\r\n        serverImgs = data.join(\"|\");\r\n      }\r\n\r\n      // 处理表单其他数据\r\n      let postData = {\r\n        community: community.id,\r\n        price,\r\n        size,\r\n        roomType,\r\n        floor,\r\n        oriented,\r\n        description,\r\n        houseImg: serverImgs,\r\n        supporting,\r\n        title,\r\n      };\r\n      // 调用接口发布房源\r\n      let res = await pubHouse(postData);\r\n      if (res.status === 200) {\r\n        Toast.success(\"发布成功！\", 1, () => {\r\n          // 跳转到房源管理\r\n          this.props.history.push(\"/rent\");\r\n        });\r\n      } else {\r\n        // token失效的情况。发布房源传递的数据不对\r\n        Toast.fail(\"发布失败！\");\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const Item = List.Item;\r\n    const { history } = this.props;\r\n    const {\r\n      community,\r\n      price,\r\n      size,\r\n      roomType,\r\n      floor,\r\n      oriented,\r\n      description,\r\n      tempSlides,\r\n      title,\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        <NavBar\r\n          className={styles.navHeader}\r\n          mode=\"dark\"\r\n          icon={<Icon type=\"left\" />}\r\n          onLeftClick={this.onCancel}\r\n        >\r\n          发布房源\r\n        </NavBar>\r\n        <List\r\n          className={styles.header}\r\n          renderHeader={() => \"基本信息\"}\r\n          data-role=\"rent-list\"\r\n        >\r\n          {/* 选择所在小区 */}\r\n          <Item\r\n            extra={community.name || \"请选择小区名称\"}\r\n            arrow=\"horizontal\"\r\n            onClick={() => history.replace(\"/rent/search\")}\r\n          >\r\n            小区名称\r\n          </Item>\r\n          <InputItem\r\n            placeholder=\"请输入租金/月\"\r\n            extra=\"￥/月\"\r\n            type=\"number\"\r\n            onChange={(v) => {\r\n              this.handlerInput(v, \"price\");\r\n            }}\r\n            value={price}\r\n          >\r\n            租&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;金\r\n          </InputItem>\r\n          <InputItem\r\n            placeholder=\"请输入建筑面积\"\r\n            extra=\"㎡\"\r\n            type=\"number\"\r\n            onChange={(v) => {\r\n              this.handlerInput(v, \"size\");\r\n            }}\r\n            value={size}\r\n          >\r\n            建筑面积\r\n          </InputItem>\r\n          <Picker\r\n            data={roomTypeData}\r\n            onChange={(v) => {\r\n              this.handlerInput(v[0], \"roomType\");\r\n            }}\r\n            value={[roomType]}\r\n            cols={1}\r\n          >\r\n            <Item arrow=\"horizontal\">\r\n              户&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;型\r\n            </Item>\r\n          </Picker>\r\n\r\n          <Picker\r\n            data={floorData}\r\n            onChange={(v) => {\r\n              this.handlerInput(v[0], \"floor\");\r\n            }}\r\n            value={[floor]}\r\n            cols={1}\r\n          >\r\n            <Item arrow=\"horizontal\">所在楼层</Item>\r\n          </Picker>\r\n          <Picker\r\n            data={orientedData}\r\n            onChange={(v) => {\r\n              this.handlerInput(v[0], \"oriented\");\r\n            }}\r\n            value={[oriented]}\r\n            cols={1}\r\n          >\r\n            <Item arrow=\"horizontal\">\r\n              朝&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;向\r\n            </Item>\r\n          </Picker>\r\n        </List>\r\n\r\n        <List\r\n          className={styles.title}\r\n          renderHeader={() => \"房屋标题\"}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <InputItem\r\n            placeholder=\"请输入标题（例如：整租 小区名 2室 5000元）\"\r\n            onChange={(v) => {\r\n              this.handlerInput(v, \"title\");\r\n            }}\r\n            value={title}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.pics}\r\n          renderHeader={() => \"房屋图像\"}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <ImagePicker\r\n            files={tempSlides}\r\n            multiple={true}\r\n            onChange={(files) => {\r\n              this.setState({\r\n                tempSlides: files,\r\n              });\r\n            }}\r\n            className={styles.imgpicker}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.supporting}\r\n          renderHeader={() => \"房屋配置\"}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <HousePackage\r\n            select\r\n            onSelect={(val) => {\r\n              // console.log(val);\r\n              this.supporting = val.join(\"|\");\r\n              // console.log(this.supporting);\r\n            }}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.desc}\r\n          renderHeader={() => \"房屋描述\"}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <TextareaItem\r\n            rows={5}\r\n            placeholder=\"请输入房屋描述信息\"\r\n            autoHeight\r\n            onChange={(v) => {\r\n              this.handlerInput(v, \"description\");\r\n            }}\r\n            value={description}\r\n          />\r\n        </List>\r\n\r\n        <Flex className={styles.bottom}>\r\n          <Flex.Item className={styles.cancel} onClick={this.onCancel}>\r\n            取消\r\n          </Flex.Item>\r\n          <Flex.Item className={styles.confirm} onClick={this.addHouse}>\r\n            提交\r\n          </Flex.Item>\r\n        </Flex>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}