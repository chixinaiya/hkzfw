{"version":3,"sources":["../node_modules/antd-mobile/lib/nav-bar/style/css.js","../node_modules/antd-mobile/lib/nav-bar/index.js","utils/api/House/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","components/HouseItem/index.js","components/HouseItem/index.module.css","pages/Map/index.module.css","pages/Map/index.js"],"names":["require","Object","defineProperty","exports","value","_extends3","_interopRequireDefault","_classCallCheck3","_createClass3","_possibleConstructorReturn3","_inherits3","_classnames2","React","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","_interopRequireWildcard","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","i","length","NavBar","_React$Component","this","__proto__","getPrototypeOf","apply","arguments","_a","props","prefixCls","className","children","mode","icon","onLeftClick","leftContent","rightContent","restProps","createElement","role","onClick","Component","defaultProps","module","getFilters","id","api","get","params","getListByFilter","cityId","filters","start","end","getDetailById","uploadImgs","fd","post","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread2","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_defineProperty","configurable","writable","HouseItem","src","title","desc","tags","price","style","styles","house","imgWrap","img","alt","content","map","tag","index","tagClass","join","priceNum","Map","state","list","isShowList","initMap","a","BMap","window","getCurCity","label","Geocoder","getPoint","point","centerAndZoom","addControl","NavigationControl","ScaleControl","renderOverlay","addEventListener","setState","getMapHouse","status","data","getTypeAndZoom","rect","nextZoom","item","createCircle","createRect","coord","longitude","latitude","lab","count","val","ipoint","Point","opts","position","offset","Size","Label","setContent","bubble","bubbleName","setStyle","background","border","setTimeout","clearOverlays","addOverlay","housename","housenum","arrow","getHouseListById","moveToCenter","zx","innerWidth","zy","innerHeight","changedTouches","clientX","clientY","panBy","renderHouseList","houseList","show","titleWrap","listTitle","titleMore","href","houseItems","history","houseCode","BASE_URL","houseImg","currZoom","getZoom","mapBox","type","goBack"],"mappings":"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","file":"static/js/10.a33ade5e.chunk.js","sourcesContent":["'use strict';\n\nrequire('../../style/css');\n\nrequire('./index.css');","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar __rest = undefined && undefined.__rest || function (s, e) {\n    var t = {};\n    for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    }return t;\n};\n\nvar NavBar = function (_React$Component) {\n    (0, _inherits3['default'])(NavBar, _React$Component);\n\n    function NavBar() {\n        (0, _classCallCheck3['default'])(this, NavBar);\n        return (0, _possibleConstructorReturn3['default'])(this, (NavBar.__proto__ || Object.getPrototypeOf(NavBar)).apply(this, arguments));\n    }\n\n    (0, _createClass3['default'])(NavBar, [{\n        key: 'render',\n        value: function render() {\n            var _a = this.props,\n                prefixCls = _a.prefixCls,\n                className = _a.className,\n                children = _a.children,\n                mode = _a.mode,\n                icon = _a.icon,\n                onLeftClick = _a.onLeftClick,\n                leftContent = _a.leftContent,\n                rightContent = _a.rightContent,\n                restProps = __rest(_a, [\"prefixCls\", \"className\", \"children\", \"mode\", \"icon\", \"onLeftClick\", \"leftContent\", \"rightContent\"]);\n            return React.createElement(\n                'div',\n                (0, _extends3['default'])({}, restProps, { className: (0, _classnames2['default'])(className, prefixCls, prefixCls + '-' + mode) }),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-left', role: 'button', onClick: onLeftClick },\n                    icon ?\n                    // tslint:disable-next-line:jsx-no-multiline-js\n                    React.createElement(\n                        'span',\n                        { className: prefixCls + '-left-icon', 'aria-hidden': 'true' },\n                        icon\n                    ) : null,\n                    leftContent\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-title' },\n                    children\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-right' },\n                    rightContent\n                )\n            );\n        }\n    }]);\n    return NavBar;\n}(React.Component);\n\nexports['default'] = NavBar;\n\nNavBar.defaultProps = {\n    prefixCls: 'am-navbar',\n    mode: 'dark',\n    onLeftClick: function onLeftClick() {}\n};\nmodule.exports = exports['default'];","import api from \"../../axios\";\r\n\r\n// 房源相关的所有接口\r\n// 获取过滤器数据\r\nexport function getFilters(id) {\r\n  return api.get(\"/houses/condition\", {\r\n    params: {\r\n      id,\r\n    },\r\n  });\r\n}\r\n// 根据筛选器条件或取房源列表\r\nexport function getListByFilter(cityId, filters, start, end) {\r\n  return api.get(\"/houses\", {\r\n    params: {\r\n      cityId,\r\n      // 组装的过滤器数据解构出来\r\n      ...filters,\r\n      // 分页\r\n      start,\r\n      end,\r\n    },\r\n  });\r\n}\r\n// 根据房源id获取房源信息\r\nexport function getDetailById(id) {\r\n  return api.get(`/houses/${id}`);\r\n}\r\n// 上传图片\r\nexport function uploadImgs(fd) {\r\n  return api.post(`/houses/image`, fd);\r\n}\r\n","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n// props\r\n// 1. cheldren -> 获取组件动态内容  <Child>adadsd</Child>\r\n// 2. defautProps -> 为组件设置默认属性  num\r\n// 3. prop-types -> 为组件的属性提供默认类型  age\r\n\r\nimport styles from './index.module.css'\r\n\r\nfunction HouseItem({ src, title, desc, tags, price, onClick, style }) {\r\n  return (\r\n    <div className={styles.house} onClick={onClick} style={style}>\r\n      <div className={styles.imgWrap}>\r\n        <img className={styles.img} src={src} alt=\"\" />\r\n      </div>\r\n      <div className={styles.content}>\r\n        <h3 className={styles.title}>{title}</h3>\r\n        <div className={styles.desc}>{desc}</div>\r\n        <div>\r\n          {/* ['近地铁', '随时看房'] */}\r\n          {tags.map((tag, index) => {\r\n            const tagClass = 'tag' + (index + 1)\r\n            return (\r\n              <span\r\n                className={[styles.tag, styles[tagClass]].join(' ')}\r\n                key={tag}\r\n              >\r\n                {tag}\r\n              </span>\r\n            )\r\n          })}\r\n        </div>\r\n        <div className={styles.price}>\r\n          <span className={styles.priceNum}>{price}</span> 元/月\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nHouseItem.propTypes = {\r\n  // src: PropTypes.string,\r\n  // title: PropTypes.string,\r\n  // desc: PropTypes.string,\r\n  // tags: PropTypes.array.isRequired,\r\n  // price: PropTypes.number,\r\n  // onClick: PropTypes.func\r\n}\r\n\r\nexport default HouseItem\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"house\":\"HouseItem_house__1TYEh\",\"imgWrap\":\"HouseItem_imgWrap__3NLSN\",\"img\":\"HouseItem_img__MR6ZJ\",\"content\":\"HouseItem_content__1wVcU\",\"title\":\"HouseItem_title__WS82w\",\"desc\":\"HouseItem_desc__JDCw1\",\"price\":\"HouseItem_price__Njr6Z\",\"priceNum\":\"HouseItem_priceNum__CpMuf\",\"tag\":\"HouseItem_tag__2OTrs\",\"tag1\":\"HouseItem_tag1__2OUr1\",\"tag2\":\"HouseItem_tag2__3YNHW\",\"tag3\":\"HouseItem_tag3__2wgo0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mapBox\":\"Map_mapBox__18AAh\",\"bubble\":\"Map_bubble__T8Wca\",\"bubbleName\":\"Map_bubbleName__oRPpC\",\"rect\":\"Map_rect__3X_nt\",\"arrow\":\"Map_arrow__3d86G\",\"housename\":\"Map_housename__3M7UR\",\"housenum\":\"Map_housenum__1p81E\",\"houseList\":\"Map_houseList__G5doG\",\"show\":\"Map_show__1rBgP\",\"titleWrap\":\"Map_titleWrap__20XfQ\",\"listTitle\":\"Map_listTitle__1TLtL\",\"titleMore\":\"Map_titleMore__QQqB8\",\"houseItems\":\"Map_houseItems__S6Lc4\"};","import React, { Component } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport { NavBar, Icon } from \"antd-mobile\";\r\nimport { getCurCity } from \"../../utils\";\r\n\r\nimport { getMapHouse } from \"../../utils/api/City/index\";\r\nimport { getListByFilter } from \"../../utils/api/House\";\r\nimport HouseItem from \"../../components/HouseItem\";\r\nimport { BASE_URL } from \"../../utils/axios\";\r\n\r\nclass Map extends Component {\r\n  state = {\r\n    // 点击小区的房源列表数据\r\n    list: [],\r\n    // 控制列表是否显示\r\n    isShowList: false,\r\n  };\r\n  componentDidMount() {\r\n    // 调用初始化地图\r\n    this.initMap();\r\n  }\r\n\r\n  // 初始化地图\r\n  initMap = async () => {\r\n    this.BMap = window.BMap;\r\n    // console.log(BMap);\r\n\r\n    // 1.创建地图实例\r\n    this.map = new this.BMap.Map(\"container\");\r\n\r\n    // 2.地图定位的经纬度位置设置\r\n    // let point = new BMap.Point(116.404, 39.915);\r\n\r\n    // 3.设置地图的位置和缩放级别\r\n    // map.centerAndZoom(point, 15);\r\n\r\n    // 获取到当前城市定位的信息\r\n    let { value, label } = await getCurCity();\r\n    // console.log(value, label);\r\n\r\n    // 创建地址解析器实例\r\n    let myGeo = new this.BMap.Geocoder();\r\n    // 将地址解析结果显示在地图上，并调整地图视野\r\n    myGeo.getPoint(\r\n      null,\r\n      async (point) => {\r\n        if (point) {\r\n          this.map.centerAndZoom(point, 11);\r\n          // map.addOverlay(new BMap.Marker(point));\r\n          // 添加控件=》平移缩放控件\r\n          this.map.addControl(new this.BMap.NavigationControl());\r\n          // 比例尺\r\n          this.map.addControl(new this.BMap.ScaleControl());\r\n          // 默认调用一次=》渲染覆盖物=》第一层区的覆盖物\r\n          this.renderOverlay(value);\r\n        }\r\n      },\r\n      label\r\n    );\r\n\r\n    // 地图开始移动的时候触发\r\n    this.map.addEventListener(\"movestart\", () => {\r\n      // 判断列表是否显示\r\n      if (this.state.isShowList) {\r\n        this.setState({\r\n          isShowList: false,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  // 渲染覆盖物\r\n  renderOverlay = async (id) => {\r\n    // 根据不同的id获取地图需要的数据\r\n    // 调用后台接口\r\n    let { status, data } = await getMapHouse(id);\r\n\r\n    // 获取一下当前地图的缩放级别 =》获取渲染覆盖物的形状和下一层缩级别\r\n    const { rect, nextZoom } = this.getTypeAndZoom();\r\n\r\n    if (status === 200) {\r\n      data.forEach((item) => {\r\n        // 根据形状创建不同的覆盖物\r\n        if (rect === \"circle\") {\r\n          // 创建圆形覆盖物=》渲染前两层\r\n          this.createCircle(item, nextZoom);\r\n        } else {\r\n          // 创建方形覆盖物=》第三层小区\r\n          this.createRect(item);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  // 圆形覆盖物\r\n  createCircle = (item, nextZoom) => {\r\n    // 遍历渲染当前城市所有区的覆盖物到地图上\r\n    const {\r\n      coord: { longitude, latitude },\r\n      label: lab,\r\n      count,\r\n      value: val,\r\n    } = item;\r\n    // 转换经纬度\r\n    const ipoint = new this.BMap.Point(longitude, latitude);\r\n\r\n    // 文本覆盖物\r\n    const opts = {\r\n      position: ipoint, // 指定文本标注所在的地理位置\r\n      offset: new this.BMap.Size(0, 0), //设置文本偏移量\r\n    };\r\n    const label = new this.BMap.Label(null, opts); // 创建文本标注对象\r\n    // 使用html创建覆盖物\r\n    label.setContent(\r\n      `\r\n    <div class=\"${styles.bubble}\">\r\n    <p class=\"${styles.bubbleName}\">${lab}</p>\r\n    <p>${count}套</p>\r\n    </div>\r\n    `\r\n    );\r\n    label.setStyle({\r\n      background: \"transparent\",\r\n      border: 0,\r\n    });\r\n    // 添加点击事件\r\n    label.addEventListener(\"click\", () => {\r\n      // console.log(val);\r\n      this.map.centerAndZoom(ipoint, nextZoom);\r\n      this.renderOverlay(val);\r\n      // 清除上一层覆盖物\r\n      setTimeout(() => {\r\n        this.map.clearOverlays();\r\n      });\r\n    });\r\n    this.map.addOverlay(label);\r\n  };\r\n\r\n  // 方形覆盖物\r\n  createRect = (item) => {\r\n    // 遍历渲染当前城市所有区的覆盖物到地图上\r\n    const {\r\n      coord: { longitude, latitude },\r\n      label: lab,\r\n      count,\r\n      value: val,\r\n    } = item;\r\n    // 转换经纬度\r\n    const ipoint = new this.BMap.Point(longitude, latitude);\r\n\r\n    // 文本覆盖物\r\n    const opts = {\r\n      position: ipoint, // 指定文本标注所在的地理位置\r\n      offset: new this.BMap.Size(-50, -28), //设置文本偏移量\r\n    };\r\n    const label = new this.BMap.Label(null, opts); // 创建文本标注对象\r\n    // 使用html创建覆盖物\r\n    label.setContent(\r\n      `\r\n        <div class=\"${styles.rect}\">\r\n        <span class=\"${styles.housename}\">${lab}</span>\r\n        <span class=\"${styles.housenum}\">${count}</span>\r\n        <i class=\"${styles.arrow}\"></i>\r\n      </div>\r\n      `\r\n    );\r\n    label.setStyle({\r\n      background: \"transparent\",\r\n      border: 0,\r\n    });\r\n    // 添加点击事件\r\n    label.addEventListener(\"click\", (e) => {\r\n      // console.log(val);\r\n      // 获取当前小区的房源列表\r\n      this.getHouseListById(val);\r\n      // 移动覆盖物到中心点\r\n      this.moveToCenter(e);\r\n      // this.map.centerAndZoom(ipoint, nextZoom);\r\n      // this.renderOverlay(val);\r\n      // // 清除上一层覆盖物\r\n      // setTimeout(() => {\r\n      //   this.map.clearOverlays();\r\n      // });\r\n    });\r\n    this.map.addOverlay(label);\r\n  };\r\n\r\n  // 点击某个小区=》移动它到中心位置\r\n  moveToCenter = (e) => {\r\n    // 计算中心点位置  终点\r\n    let zx = window.innerWidth / 2,\r\n      zy = (window.innerHeight - 330) / 2;\r\n\r\n    // 当前点击覆盖物的坐标点   起点\r\n\r\n    let { clientX, clientY } = e.changedTouches[0];\r\n    // 计算当前点击覆盖物=》移动到中心点坐标\r\n    //中心点 = 终点 - 起点\r\n    this.map.panBy(zx - clientX, zy - clientY);\r\n  };\r\n\r\n  // 根据小区id获取当前小区的房源列表数据\r\n  getHouseListById = async (id) => {\r\n    let {\r\n      status,\r\n      data: { list },\r\n    } = await getListByFilter(id);\r\n    if (status === 200) {\r\n      this.setState({\r\n        list,\r\n        isShowList: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  // 渲染小区下房屋列表\r\n  renderHouseList = () => {\r\n    return (\r\n      <div\r\n        className={[\r\n          styles.houseList,\r\n          this.state.isShowList ? styles.show : \"\",\r\n        ].join(\" \")}\r\n      >\r\n        <div className={styles.titleWrap}>\r\n          <h1 className={styles.listTitle}>房屋列表</h1>\r\n          <a className={styles.titleMore} href=\"/home/house\">\r\n            更多房源\r\n          </a>\r\n        </div>\r\n\r\n        <div className={styles.houseItems}>\r\n          {/* 房屋结构 */}\r\n          {this.state.list.map((item) => (\r\n            <HouseItem\r\n              onClick={() =>\r\n                this.props.history.push(`/detail/${item.houseCode}`)\r\n              }\r\n              key={item.houseCode}\r\n              src={BASE_URL + item.houseImg}\r\n              title={item.title}\r\n              desc={item.desc}\r\n              tags={item.tags}\r\n              price={item.price}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // 获取当前的覆盖物形状和下一层缩放级别\r\n  getTypeAndZoom = () => {\r\n    let rect, nextZoom;\r\n    // 获取当前地图的缩放级别\r\n    const currZoom = this.map.getZoom();\r\n    // 默认第一层：zoom=11\r\n    if (currZoom >= 10 && currZoom < 12) {\r\n      rect = \"circle\";\r\n      nextZoom = 13;\r\n    } else if (currZoom >= 12 && currZoom < 14) {\r\n      rect = \"circle\";\r\n      nextZoom = 15;\r\n    } else if (currZoom >= 14 && currZoom < 16) {\r\n      rect = \"rect\";\r\n    }\r\n    return {\r\n      rect,\r\n      nextZoom,\r\n    };\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className={styles.mapBox}>\r\n        {/* 地图导航栏 */}\r\n        <NavBar\r\n          mode=\"dark\"\r\n          icon={<Icon type=\"left\" />}\r\n          onLeftClick={() => this.props.history.goBack()}\r\n        >\r\n          地图找房\r\n        </NavBar>\r\n        {/* 地图 */}\r\n        <div id=\"container\"></div>\r\n\r\n        {this.renderHouseList()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Map;\r\n"],"sourceRoot":""}